<!--pages/collection/collection.wxml-->
<view class="page">
  <!-- å¤´éƒ¨ç»Ÿè®¡ -->
  <view class="header-stats card">
    <view class="stats-content">
      <view class="stats-icon">â¤ï¸</view>
      <view class="stats-info">
        <view class="stats-title">æˆ‘çš„æ”¶è—</view>
        <view class="stats-count">å…±æ”¶è—äº† {{collections.length}} ä¸ªæˆè¯­</view>
      </view>
    </view>
    <view class="stats-actions" wx:if="{{collections.length > 0}}">
      <button class="clear-btn" bindtap="clearAllCollections">æ¸…ç©º</button>
    </view>
  </view>

  <!-- æ”¶è—åˆ—è¡¨ -->
  <view class="collections-list" wx:if="{{collections.length > 0}}">
    <view class="collection-item card" wx:for="{{collections}}" wx:key="id" bindtap="viewIdiom" data-id="{{item.id}}">
      <view class="item-content">
        <view class="item-header">
          <view class="idiom-name">{{item.idiom}}</view>
          <view class="item-actions">
            <view class="difficulty-tag difficulty-chuji" wx:if="{{item.difficulty === 'åˆçº§'}}">{{item.difficulty}}</view>
            <view class="difficulty-tag difficulty-zhongji" wx:if="{{item.difficulty === 'ä¸­çº§'}}">{{item.difficulty}}</view>
            <view class="difficulty-tag difficulty-gaoji" wx:if="{{item.difficulty === 'é«˜çº§'}}">{{item.difficulty}}</view>
            <view class="remove-btn" bindtap="removeCollection" data-id="{{item.id}}" catchtap="true">Ã—</view>
          </view>
        </view>
        <view class="idiom-pinyin">{{item.pinyin}}</view>
        <view class="idiom-meaning">{{item.meaning}}</view>
        <view class="item-footer">
          <view class="category-tag">{{item.category}}</view>
          <view class="collect-time">{{item.collectTime}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{collections.length === 0}}">
    <view class="empty-icon">ğŸ“š</view>
    <view class="empty-title">è¿˜æ²¡æœ‰æ”¶è—ä»»ä½•æˆè¯­</view>
    <view class="empty-desc">åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ç‚¹å‡»â¤ï¸å³å¯æ”¶è—å–œæ¬¢çš„æˆè¯­</view>
    <button class="btn-primary" bindtap="goToHome">å»å­¦ä¹ </button>
  </view>

  <!-- æ‰¹é‡æ“ä½œæ¨¡å¼ -->
  <view class="batch-actions" wx:if="{{batchMode && collections.length > 0}}">
    <view class="batch-info">
      <text>å·²é€‰æ‹© {{selectedCount}} ä¸ª</text>
    </view>
    <view class="batch-buttons">
      <button class="btn-secondary" bindtap="cancelBatch">å–æ¶ˆ</button>
      <button class="btn-primary" bindtap="batchRemove" disabled="{{selectedCount === 0}}">åˆ é™¤é€‰ä¸­</button>
    </view>
  </view>

  <!-- æµ®åŠ¨æ“ä½œæŒ‰é’® -->
  <view class="fab" wx:if="{{collections.length > 0}}" bindtap="toggleBatchMode">
    <text class="fab-icon">{{batchMode ? 'âœ“' : 'âš™ï¸'}}</text>
  </view>
</view>