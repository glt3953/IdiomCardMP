<!--pages/story/story.wxml-->
<view class="page">
  <!-- æˆè¯­æ ‡é¢˜ -->
  <view class="story-header card">
    <view class="idiom-title">{{idiom.idiom}}</view>
    <view class="idiom-pinyin">{{idiom.pinyin}}</view>
    <view class="idiom-tags">
      <text class="difficulty-tag difficulty-chuji" wx:if="{{idiom.difficulty === 'åˆçº§'}}">{{idiom.difficulty}}</text>
      <text class="difficulty-tag difficulty-zhongji" wx:if="{{idiom.difficulty === 'ä¸­çº§'}}">{{idiom.difficulty}}</text>
      <text class="difficulty-tag difficulty-gaoji" wx:if="{{idiom.difficulty === 'é«˜çº§'}}">{{idiom.difficulty}}</text>
      <text class="category-tag">{{idiom.category}}</text>
    </view>
  </view>

  <!-- æˆè¯­é‡Šä¹‰ -->
  <view class="meaning-section card">
    <view class="section-title">
      <text class="title-icon">ğŸ“–</text>
      <text class="title-text">æˆè¯­é‡Šä¹‰</text>
    </view>
    <view class="meaning-content">{{idiom.meaning}}</view>
  </view>

  <!-- æˆè¯­æ•…äº‹ -->
  <view class="story-section card">
    <view class="section-title">
      <text class="title-icon">ğŸ“š</text>
      <text class="title-text">æˆè¯­æ•…äº‹</text>
    </view>
    <scroll-view class="story-content" scroll-y="true">
      <text class="story-text">{{idiom.story}}</text>
    </scroll-view>
  </view>

  <!-- å‡ºå¤„æ¥æº -->
  <view class="source-section card" wx:if="{{idiom.source}}">
    <view class="section-title">
      <text class="title-icon">ğŸ“œ</text>
      <text class="title-text">å‡ºå¤„æ¥æº</text>
    </view>
    <view class="source-content">{{idiom.source}}</view>
  </view>

  <!-- å¯“æ„é“ç† -->
  <view class="moral-section card" wx:if="{{idiom.moral}}">
    <view class="section-title">
      <text class="title-icon">ğŸ’¡</text>
      <text class="title-text">å¯“æ„é“ç†</text>
    </view>
    <view class="moral-content">{{idiom.moral}}</view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button class="action-btn collect-btn" bindtap="toggleCollection">
      <text class="btn-icon">{{isCollected ? 'â¤ï¸' : 'ğŸ¤'}}</text>
      <text class="btn-text">{{isCollected ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
    </button>
    <button class="action-btn share-btn" bindtap="shareStory">
      <text class="btn-icon">ğŸ“¤</text>
      <text class="btn-text">åˆ†äº«</text>
    </button>
    <button class="action-btn speak-btn" bindtap="speakStory">
      <text class="btn-icon">ğŸ”Š</text>
      <text class="btn-text">æœ—è¯»</text>
    </button>
  </view>
</view>